# Окно "Аналитика учебного процесса" - Документация

## Обзор

Новое окно "Аналитика учебного процесса" предоставляет визуальное представление статистики обучения операторов с возможностью выбора временного периода и интерактивными графиками.

## Функциональность

### 1. Управление окном
- **Добавление**: Через кнопку "Добавить/Убрать" → галочка "Аналитика учебного процесса"
- **Перемещение**: Перетаскивание за заголовок (только в режиме редактирования)
- **Изменение размера**: Перетаскивание угла в правом нижнем углу
- **Свертывание/развертывание**: Кнопки в правом верхнем углу (только в режиме редактирования)
- **Закрытие**: Кнопка "×" (только в режиме редактирования)

### 2. Выбор периода
- **Дата начала**: Выбор месяца и года начала периода
- **Дата окончания**: Выбор месяца и года окончания периода  
- **Валидация**: Автоматическая проверка корректности диапазона дат
- **Обновление**: Кнопка "Обновить" для применения нового периода

### 3. Визуализация данных

#### Круговая диаграмма
- Показывает соотношение обученных и необученных операторов
- Цветовая схема: синий (обученные), красный (необученные)
- Легенда с процентными значениями

#### Таблица критериев
- Список критериев оценки с прогресс-барами
- Отображение процентных значений для каждого критерия
- Hover-эффекты для лучшей интерактивности

#### Линейный график
- Отображение динамики обученных звонков по месяцам
- Интерактивные точки данных
- Сетка для удобства чтения значений

## Технические детали

### Файлы
- `css/analytics-dashboard.css` - Стили окна аналитики
- `js/analytics-manager.js` - JavaScript логика и управление данными
- Интеграция в `main.html` - HTML разметка окна

### Основные классы CSS
- `.analytics-dashboard-window` - Основной контейнер окна
- `.analytics-controls` - Панель управления датами
- `.analytics-content` - Область с графиками и данными
- `.analytics-chart-container` - Контейнер для круговой диаграммы
- `.analytics-line-chart-container` - Контейнер для линейного графика

### JavaScript API
```javascript
// Инициализация
AnalyticsManager.init()

// Обновление данных
AnalyticsManager.updateAnalytics()

// Очистка ресурсов
AnalyticsManager.destroy()
```

## Адаптивность

- Окно адаптируется к разным размерам экрана
- На мобильных устройствах элементы управления располагаются вертикально
- Графики масштабируются в зависимости от размера окна

## Интеграция с существующей системой

### Совместимость с window-manager
- Полная поддержка всех функций управления окнами
- Сохранение состояния в localStorage
- Синхронизация с чекбоксами в выпадающем меню

### Уведомления
- Использует глобальную систему уведомлений `showNotification()`
- Информирует о валидации дат, обновлении данных и ошибках

### Состояния окна
- Поддержка максимизации/минимизации
- Сохранение позиции и размеров
- Автоматическое восстановление состояния при перезагрузке

## Настройка и кастомизация

### Изменение данных
Для изменения источника данных отредактируйте метод `loadInitialData()` в `analytics-manager.js`:

```javascript
loadInitialData: function() {
    this.currentData = {
        pieData: { trained: 54, untrained: 46 },
        criteriaData: [...],
        lineData: { months: [...], values: [...] }
    };
}
```

### Стилизация
Основные CSS переменные можно изменить в `analytics-dashboard.css`:
- Цветовая схема графиков
- Размеры и отступы
- Анимации и переходы

## Тестирование

Используйте файл `test-analytics.html` для тестирования функциональности:

1. Откройте `test-analytics.html` в браузере
2. Следуйте инструкциям на странице
3. Протестируйте все функции окна

## Известные ограничения

1. Данные сейчас генерируются случайно для демонстрации
2. Графики рисуются на Canvas без внешних библиотек для минимизации зависимостей
3. Максимальный размер окна ограничен размером экрана

## Будущие улучшения

- Интеграция с реальным API для получения данных
- Добавление дополнительных типов графиков
- Экспорт данных в различные форматы
- Более детальная фильтрация по операторам и группам
